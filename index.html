<!DOCTYPE html>
<html lang="en" id="html-root">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="MsikaOnline - Malawi's premier marketplace for buying and selling with secure local payment options.">
    <meta name="keywords" content="Malawi, marketplace, buy, sell, MPamba, Airtel Money">
    <meta name="author" content="Dumisani Tukula">
    <!-- Open Graph Tags -->
    <meta property="og:title" content="MsikaOnline - Malawi's Premier Marketplace">
    <meta property="og:description" content="Buy and sell with trusted local sellers in Malawi. Secure payments with MPamba, Airtel Money, and bank transfers.">
    <meta property="og:image" content="https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80">
    <meta property="og:url" content="https://msikaonline.mw">
    <meta property="og:type" content="website">
    <!-- Schema.org Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "OnlineStore",
        "name": "MsikaOnline",
        "url": "https://msikaonline.mw",
        "description": "Malawi's premier online marketplace for buying and selling goods.",
        "address": {
            "@type": "PostalAddress",
            "addressCountry": "MW",
            "addressLocality": "Lilongwe",
            "postalCode": "1234"
        }
    }
    </script>
    <title>MsikaOnline - Malawi's Premier Marketplace</title>
    <link rel="manifest" href="/manifest.json">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" href="/styles.css">
    <link rel="preload" href="https://images.unsplash.com/photo-1566438480900-0609be27a4be?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80" as="image">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" aria-label="Main navigation">
        <div class="container">
            <a class="navbar-brand" href="#" aria-label="MsikaOnline Home">
                <i class="fas fa-store me-2"></i>MsikaOnline
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#home" aria-current="page"><i class="fas fa-home me-1"></i> Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#categories"><i class="fas fa-list me-1"></i> Categories</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#sell"><i class="fas fa-tag me-1"></i> Sell</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about"><i class="fas fa-info-circle me-1"></i> About</a>
                    </li>
                </ul>
                <div class="d-flex align-items-center">
                    <input type="search" class="form-control me-2" id="productSearch" placeholder="Search products..." aria-label="Search products">
                    <div class="dropdown me-2">
                        <button class="btn btn-outline-light dropdown-toggle" type="button" id="currencyDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-money-bill-wave me-1"></i> MWK
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#">MWK - Malawi Kwacha</a></li>
                            <li><a class="dropdown-item" href="#">USD - US Dollar</a></li>
                            <li><a class="dropdown-item" href="#">ZAR - South African Rand</a></li>
                        </ul>
                    </div>
                    <button class="btn btn-outline-light me-2" id="darkModeToggle" aria-label="Toggle dark mode">
                        <i class="fas fa-moon"></i>
                    </button>
                    <a href="#chat" class="btn btn-outline-light me-2 position-relative" aria-label="Messages">
                        <i class="fas fa-comments"></i>
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">3</span>
                    </a>
                    <div class="dropdown">
                        <button class="btn btn-outline-light dropdown-toggle" type="button" id="authDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user me-1"></i> Account
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#loginModal"><i class="fas fa-sign-in-alt me-2"></i>Login</a></li>
                            <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#registerModal"><i class="fas fa-user-plus me-2"></i>Register</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#"><i class="fas fa-question-circle me-2"></i>Help</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Cookie Consent Banner -->
    <div class="cookie-banner" id="cookieBanner">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <p>We use cookies to enhance your experience. By continuing, you agree to our <a href="#cookie-policy" class="text-white">Cookie Policy</a>.</p>
                </div>
                <div class="col-md-4 text-md-end">
                    <button class="btn btn-outline-light me-2" id="cookieDecline" aria-label="Decline cookies">Decline</button>
                    <button class="btn btn-malawi" id="cookieAccept" aria-label="Accept cookies">Accept</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <header class="hero-section" id="home" role="banner">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-6">
                        <h1 class="hero-title animate__animated animate__fadeInDown">Malawi's Premier Marketplace</h1>
                        <p class="hero-subtitle animate__animated animate__fadeIn animate__delay-1s">Buy and sell with trusted local sellers. Secure payments with MPamba, Airtel Money, and bank transfers.</p>
                        <div class="d-flex gap-3 animate__animated animate__fadeIn animate__delay-1-5s">
                            <a href="#sell" class="btn btn-malawi"><i class="fas fa-tag me-2"></i>Sell Now</a>
                            <a href="#browse" class="btn btn-outline-malawi"><i class="fas fa-search me-2"></i>Browse Items</a>
                        </div>
                    </div>
                    <div class="col-lg-6 d-none d-lg-block animate__animated animate__fadeIn animate__delay-2s">
                        <img src="https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" alt="Malawi Market" class="img-fluid rounded shadow-lg animate-float" loading="lazy">
                    </div>
                </div>
            </div>
        </header>

        <!-- Categories, Featured Products, Sell, Testimonials, etc. -->
        <!-- These sections remain largely unchanged but include lazy loading for images and ARIA attributes -->
        <!-- Example for Featured Products -->
        <section class="py-5 bg-light" id="browse">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center mb-5">
                    <h2 class="section-title">Featured Products</h2>
                    <div class="d-flex gap-3">
                        <select class="form-select w-auto" id="categoryFilter" aria-label="Filter by category">
                            <option value="">All Categories</option>
                            <option value="furniture">Furniture</option>
                            <option value="electronics">Electronics</option>
                            <option value="clothing">Clothing</option>
                            <option value="vehicles">Vehicles</option>
                        </select>
                        <a href="#" class="btn btn-outline-malawi">View All <i class="fas fa-arrow-right ms-2"></i></a>
                    </div>
                </div>
                <div class="row g-4" id="productList">
                    <div class="col-md-6 col-lg-3" data-category="furniture">
                        <div class="card product-card h-100">
                            <div class="badge-discount">-20%</div>
                            <img src="https://images.unsplash.com/photo-1555041469-a586c61ea9bc?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" class="card-img-top" alt="Handcrafted Wooden Chair" loading="lazy">
                            <div class="card-body">
                                <h5 class="card-title">Handcrafted Wooden Chair</h5>
                                <p class="location text-muted"><i class="fas fa-map-marker-alt me-1"></i> Lilongwe</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="price mb-0">MK 25,000</h6>
                                    <span class="rating"><i class="fas fa-star"></i> 4.5</span>
                                </div>
                            </div>
                            <div class="card-footer bg-white border-0">
                                <button class="btn btn-malawi w-100" aria-label="Add Handcrafted Wooden Chair to cart">Add to Cart</button>
                            </div>
                        </div>
                    </div>
                    <!-- Other products follow similar structure -->
                </div>
            </div>
        </section>

        <!-- Other sections (Sell, Testimonials, etc.) remain similar with added accessibility and lazy loading -->
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <div class="footer-logo">MsikaOnline</div>
                    <p>Malawi's trusted marketplace connecting buyers and sellers nationwide.</p>
                    <div class="social-icons">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <!-- Footer links remain the same but with aria-labels -->
            </div>
            <div class="copyright">
                <div class="row">
                    <div class="col-md-6 text-center text-md-start">
                        <p class="mb-0">&copy; 2025 MsikaOnline. All rights reserved.</p>
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        <p class="mb-0">
                            <span class="me-2">Proudly Malawian</span>
                            <img src="https://flagcdn.com/w20/mw.png" alt="Malawi Flag" style="height: 15px;" loading="lazy">
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Toast Notification Container -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="toastNotification" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                <strong class="me-auto">MsikaOnline</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/scripts.js" defer></script>
    <script>
        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js');
            });
        }
    </script>
</body>
</html>
