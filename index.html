<!DOCTYPE html>
<html lang="en" id="html-root">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="MsikaOnline - Malawi's premier marketplace for buying and selling with secure local payment options.">
    <meta name="keywords" content="Malawi, marketplace, buy, sell, MPamba, Airtel Money">
    <meta name="author" content="Dumisani Tukula">
    <!-- Open Graph Tags -->
    <meta property="og:title" content="MsikaOnline - Malawi's Premier Marketplace">
    <meta property="og:description" content="Buy and sell with trusted local sellers in Malawi. Secure payments with MPamba, Airtel Money, and bank transfers.">
    <meta property="og:image" content="/images/og-image.jpg">
    <meta property="og:url" content="https://msikaonline.mw">
    <meta property="og:type" content="website">
    <!-- Schema.org Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "OnlineStore",
        "name": "MsikaOnline",
        "url": "https://msikaonline.mw",
        "description": "Malawi's premier online marketplace for buying and selling goods.",
        "address": {
            "@type": "PostalAddress",
            "addressCountry": "MW",
            "addressLocality": "Lilongwe",
            "postalCode": "1234"
        }
    }
    </script>
    <title>MsikaOnline - Malawi's Premier Marketplace</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous" onerror="this.href='/css/bootstrap.min.css'">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" onerror="this.href='/css/font-awesome.min.css'">
    <link rel="preload" href="/images/hero-bg.jpg" as="image">
    <style>
        :root {
            --primary-color: #289e47;
            --secondary-color: #000000;
            --accent-color: #e30b17;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --text-color: #212529;
            --bg-color: #f5f5f5;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --text-color: #f8f9fa;
                --bg-color: #343a40;
                --light-color: #495057;
                --dark-color: #212529;
            }
        }

        html.dark-mode {
            --text-color: #f8f9fa !important;
            --bg-color: #343a40 !important;
            --light-color: #495057 !important;
            --dark-color: #212529 !important;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding-top: 70px;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .navbar {
            background: linear-gradient(to right, var(--accent-color) 33%, var(--secondary-color) 33%, var(--secondary-color) 66%, var(--primary-color) 66%);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 0.5rem 0;
        }

        .navbar-brand {
            font-weight: 700;
            color: white !important;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 0.5rem 1rem;
            border-radius: 5px;
        }

        .nav-link {
            color: white !important;
            font-weight: 500;
            margin: 0 0.5rem;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            transform: translateY(-2px);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .hero-section {
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('/images/hero-bg.jpg');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 5rem 0;
            position: relative;
        }

        .hero-section::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 10px;
            background: linear-gradient(to right, var(--accent-color) 33%, var(--secondary-color) 33%, var(--secondary-color) 66%, var(--primary-color) 66%);
            border-radius: 2px;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 800;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .hero-subtitle {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .btn-malawi {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
            font-weight: 600;
            padding: 0.75rem 2rem;
            border-radius: 50px;
            transition: all 0.3s ease;
        }

        .btn-malawi:hover {
            background-color: #1e7e38;
            border-color: #1e7e38;
            -webkit-transform: translateY(-3px);
            -moz-transform: translateY(-3px);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .btn-outline-malawi {
            border-color: white;
            color: white;
            font-weight: 600;
            padding: 0.75rem 2rem;
            border-radius: 50px;
            transition: all 0.3s ease;
        }

        .btn-outline-malawi:hover {
            background-color: white;
            color: var(--dark-color);
            -webkit-transform: translateY(-3px);
            -moz-transform: translateY(-3px);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            position: relative;
            margin-bottom: 3rem;
            padding-bottom: 1rem;
        }

        .section-title::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 80px;
            height: 4px;
            background: linear-gradient(to right, var(--accent-color) 33%, var(--secondary-color) 33%, var(--secondary-color) 66%, var(--primary-color) 66%);
            border-radius: 2px;
        }

        .icon-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .product-card {
            border: none;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            will-change: transform, box-shadow;
            margin-bottom: 1.5rem;
        }

        .product-card:hover {
            -webkit-transform: translateY(-10px);
            -moz-transform: translateY(-10px);
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .product-card .card-img-top {
            height: 200px;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .product-card:hover .card-img-top {
            -webkit-transform: scale(1.05);
            -moz-transform: scale(1.05);
            transform: scale(1.05);
        }

        .product-card .card-body {
            padding: 1.5rem;
        }

        .product-card .card-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .product-card .location {
            color: #6c757d;
            font-size: 0.9rem;
        }

        .product-card .price {
            font-weight: 700;
            color: var(--primary-color);
            font-size: 1.2rem;
        }

        .product-card .rating {
            color: #ffc107;
        }

        .badge-discount {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--accent-color);
            color: white;
            font-weight: 600;
            padding: 0.25rem 0.5rem;
            border-radius: 5px;
        }

        .auth-card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .auth-card .card-header {
            background: linear-gradient(to right, var(--accent-color) 33%, var(--secondary-color) 33%, var(--secondary-color) 66%, var(--primary-color) 66%);
            color: white;
            padding: 1.5rem;
            text-align: center;
        }

        .auth-card .card-body {
            padding: 2rem;
        }

        .form-control {
            padding: 0.75rem 1rem;
            border-radius: 8px;
            border: 1px solid #ced4da;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.25rem rgba(40, 158, 71, 0.25);
        }

        .form-control.is-invalid {
            border-color: #dc3545;
        }

        .password-strength {
            height: 5px;
            background-color: #e9ecef;
            border-radius: 5px;
            margin-top: 0.5rem;
            overflow: hidden;
        }

        .password-strength-bar {
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .verification-badge {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            font-size: 0.8rem;
            padding: 0.25rem 0.5rem;
            border-radius: 50px;
            margin-left: 0.5rem;
        }

        .footer {
            background-color: var(--dark-color);
            color: white;
            padding: 3rem 0 1rem;
        }

        .footer-logo {
            font-weight: 700;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .footer-links h5 {
            font-weight: 600;
            margin-bottom: 1.5rem;
            position: relative;
            padding-bottom: 0.5rem;
        }

        .footer-links h5::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 2px;
            background-color: var(--primary-color);
        }

        .footer-links ul {
            list-style: none;
            padding-left: 0;
        }

        .footer-links li {
            margin-bottom: 0.5rem;
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .footer-links a:hover {
            color: white;
            padding-left: 5px;
        }

        .social-icons a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: white;
            margin-right: 0.5rem;
            transition: all 0.3s ease;
        }

        .social-icons a:hover {
            background-color: var(--primary-color);
            -webkit-transform: translateY(-3px);
            -moz-transform: translateY(-3px);
            transform: translateY(-3px);
        }

        .copyright {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 1.5rem;
            margin-top: 2rem;
        }

        .cookie-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--dark-color);
            color: white;
            padding: 1.5rem;
            z-index: 1050;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            display: none;
        }

        .cookie-banner.show {
            display: block;
        }

        .policy-list {
            list-style-type: disc;
            padding-left: 20px;
            margin-bottom: 1rem;
        }

        .animate-pop {
            animation: pop 0.3s ease-out;
        }

        @keyframes pop {
            from { transform: scale(0.95); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .animate-float {
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        @media (max-width: 768px) {
            .hero-title {
                font-size: 2rem;
            }
            .hero-subtitle {
                font-size: 1.2rem;
            }
            .section-title {
                font-size: 1.8rem;
            }
            .navbar-nav {
                background-color: var(--dark-color);
                padding: 1rem;
            }
            .product-card .card-img-top {
                height: 150px;
            }
            .cookie-banner .btn {
                padding: 0.5rem 1rem;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" aria-label="Main navigation">
        <div class="container">
            <a class="navbar-brand" href="#" aria-label="MsikaOnline Home">
                <i class="fas fa-store me-2" aria-hidden="true"></i>MsikaOnline
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#home" aria-current="page"><i class="fas fa-home me-1" aria-hidden="true"></i> Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#categories"><i class="fas fa-list me-1" aria-hidden="true"></i> Categories</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#sell"><i class="fas fa-tag me-1" aria-hidden="true"></i> Sell</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about"><i class="fas fa-info-circle me-1" aria-hidden="true"></i> About</a>
                    </li>
                </ul>
                <div class="d-flex align-items-center">
                    <input type="search" class="form-control me-2" id="productSearch" placeholder="Search products..." aria-label="Search products">
                    <div class="dropdown me-2">
                        <button class="btn btn-outline-light dropdown-toggle" type="button" id="currencyDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-money-bill-wave me-1" aria-hidden="true"></i> MWK
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#">MWK - Malawi Kwacha</a></li>
                            <li><a class="dropdown-item" href="#">USD - US Dollar</a></li>
                            <li><a class="dropdown-item" href="#">ZAR - South African Rand</a></li>
                        </ul>
                    </div>
                    <button class="btn btn-outline-light me-2" id="darkModeToggle" aria-label="Toggle dark mode">
                        <i class="fas fa-moon" aria-hidden="true"></i>
                    </button>
                    <a href="#chat" class="btn btn-outline-light me-2 position-relative" aria-label="Messages">
                        <i class="fas fa-comments" aria-hidden="true"></i>
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">3</span>
                    </a>
                    <div class="dropdown">
                        <button class="btn btn-outline-light dropdown-toggle" type="button" id="authDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user me-1" aria-hidden="true"></i> Account
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#loginModal"><i class="fas fa-sign-in-alt me-2" aria-hidden="true"></i>Login</a></li>
                            <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#registerModal"><i class="fas fa-user-plus me-2" aria-hidden="true"></i>Register</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#"><i class="fas fa-question-circle me-2" aria-hidden="true"></i>Help</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Cookie Consent Banner -->
    <div class="cookie-banner" id="cookieBanner" role="alert">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <p>We use cookies to enhance your experience. By continuing, you agree to our <a href="#cookie-policy" class="text-white policy-link">Cookie Policy</a>.</p>
                </div>
                <div class="col-md-4 text-md-end">
                    <button class="btn btn-outline-light me-2" id="cookieDecline" aria-label="Decline cookies">Decline</button>
                    <button class="btn btn-malawi" id="cookieAccept" aria-label="Accept cookies">Accept</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <header class="hero-section" id="home" role="banner">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-6">
                        <h1 class="hero-title">Malawi's Premier Marketplace</h1>
                        <p class="hero-subtitle">Buy and sell with trusted local sellers. Secure payments with MPamba, Airtel Money, and bank transfers.</p>
                        <div class="d-flex gap-3">
                            <a href="#sell" class="btn btn-malawi"><i class="fas fa-tag me-2" aria-hidden="true"></i>Sell Now</a>
                            <a href="#browse" class="btn btn-outline-malawi"><i class="fas fa-search me-2" aria-hidden="true"></i>Browse Items</a>
                        </div>
                    </div>
                    <div class="col-lg-6 d-none d-lg-block">
                        <img src="/images/market.jpg" alt="Malawi Market" class="img-fluid rounded shadow-lg animate-float" loading="lazy" onerror="this.src='/images/placeholder.jpg'">
                    </div>
                </div>
            </div>
        </header>

        <!-- Categories Section -->
        <section class="py-5 bg-white" id="categories" role="region" aria-labelledby="categories-title">
            <div class="container">
                <h2 class="section-title" id="categories-title">Popular Categories</h2>
                <div class="row g-4">
                    <div class="col-md-3 col-6">
                        <a href="#" class="text-decoration-none" aria-label="Furniture category">
                            <div class="card category-card h-100 border-0 shadow-sm animate-pop">
                                <div class="card-body text-center">
                                    <div class="icon-circle bg-primary bg-opacity-10 text-primary mb-3 mx-auto">
                                        <i class="fas fa-couch fa-2x" aria-hidden="true"></i>
                                    </div>
                                    <h5 class="mb-0">Furniture</h5>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="col-md-3 col-6">
                        <a href="#" class="text-decoration-none" aria-label="Electronics category">
                            <div class="card category-card h-100 border-0 shadow-sm animate-pop">
                                <div class="card-body text-center">
                                    <div class="icon-circle bg-success bg-opacity-10 text-success mb-3 mx-auto">
                                        <i class="fas fa-mobile-alt fa-2x" aria-hidden="true"></i>
                                    </div>
                                    <h5 class="mb-0">Electronics</h5>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="col-md-3 col-6">
                        <a href="#" class="text-decoration-none" aria-label="Clothing category">
                            <div class="card category-card h-100 border-0 shadow-sm animate-pop">
                                <div class="card-body text-center">
                                    <div class="icon-circle bg-danger bg-opacity-10 text-danger mb-3 mx-auto">
                                        <i class="fas fa-tshirt fa-2x" aria-hidden="true"></i>
                                    </div>
                                    <h5 class="mb-0">Clothing</h5>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="col-md-3 col-6">
                        <a href="#" class="text-decoration-none" aria-label="Vehicles category">
                            <div class="card category-card h-100 border-0 shadow-sm animate-pop">
                                <div class="card-body text-center">
                                    <div class="icon-circle bg-warning bg-opacity-10 text-warning mb-3 mx-auto">
                                        <i class="fas fa-car fa-2x" aria-hidden="true"></i>
                                    </div>
                                    <h5 class="mb-0">Vehicles</h5>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Featured Products -->
        <section class="py-5 bg-light" id="browse" role="region" aria-labelledby="browse-title">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center mb-5">
                    <h2 class="section-title" id="browse-title">Featured Products</h2>
                    <div class="d-flex gap-3">
                        <select class="form-select w-auto" id="categoryFilter" aria-label="Filter by category">
                            <option value="">All Categories</option>
                            <option value="furniture">Furniture</option>
                            <option value="electronics">Electronics</option>
                            <option value="clothing">Clothing</option>
                            <option value="vehicles">Vehicles</option>
                            <option value="art">Art & Crafts</option>
                            <option value="jewelry">Jewelry</option>
                        </select>
                        <a href="#" class="btn btn-outline-malawi">View All <i class="fas fa-arrow-right ms-2" aria-hidden="true"></i></a>
                    </div>
                </div>
                <div class="row g-4" id="productList">
                    <div class="col-md-6 col-lg-3" data-category="furniture">
                        <div class="card product-card h-100">
                            <div class="badge-discount">-20%</div>
                            <img src="/images/chair.jpg" class="card-img-top" alt="Handcrafted Wooden Chair" loading="lazy" onerror="this.src='/images/placeholder.jpg'">
                            <div class="card-body">
                                <h5 class="card-title">Handcrafted Wooden Chair</h5>
                                <p class="location text-muted"><i class="fas fa-map-marker-alt me-1" aria-hidden="true"></i> Lilongwe</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="price mb-0">MK 25,000</h6>
                                    <span class="rating"><i class="fas fa-star" aria-hidden="true"></i> 4.5</span>
                                </div>
                            </div>
                            <div class="card-footer bg-white border-0">
                                <button class="btn btn-malawi w-100" aria-label="Add Handcrafted Wooden Chair to cart">Add to Cart</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3" data-category="art">
                        <div class="card product-card h-100">
                            <img src="/images/basket.jpg" class="card-img-top" alt="Traditional Malawi Basket" loading="lazy" onerror="this.src='/images/placeholder.jpg'">
                            <div class="card-body">
                                <h5 class="card-title">Traditional Malawi Basket</h5>
                                <p class="location text-muted"><i class="fas fa-map-marker-alt me-1" aria-hidden="true"></i> Blantyre</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="price mb-0">MK 8,500</h6>
                                    <span class="rating"><i class="fas fa-star" aria-hidden="true"></i> 4.2</span>
                                </div>
                            </div>
                            <div class="card-footer bg-white border-0">
                                <button class="btn btn-malawi w-100" aria-label="Add Traditional Malawi Basket to cart">Add to Cart</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3" data-category="electronics">
                        <div class="card product-card h-100">
                            <div class="badge-discount">New</div>
                            <img src="/images/smartphone.jpg" class="card-img-top" alt="Second-hand Smartphone" loading="lazy" onerror="this.src='/images/placeholder.jpg'">
                            <div class="card-body">
                                <h5 class="card-title">Second-hand Smartphone</h5>
                                <p class="location text-muted"><i class="fas fa-map-marker-alt me-1" aria-hidden="true"></i> Mzuzu</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="price mb-0">MK 120,000</h6>
                                    <span class="rating"><i class="fas fa-star" aria-hidden="true"></i> 4.0</span>
                                </div>
                            </div>
                            <div class="card-footer bg-white border-0">
                                <button class="btn btn-malawi w-100" aria-label="Add Second-hand Smartphone to cart">Add to Cart</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3" data-category="jewelry">
                        <div class="card product-card h-100">
                            <img src="/images/jewelry.jpg" class="card-img-top" alt="Handmade Jewelry Set" loading="lazy" onerror="this.src='/images/placeholder.jpg'">
                            <div class="card-body">
                                <h5 class="card-title">Handmade Jewelry Set</h5>
                                <p class="location text-muted"><i class="fas fa-map-marker-alt me-1" aria-hidden="true"></i> Zomba</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="price mb-0">MK 15,000</h6>
                                    <span class="rating"><i class="fas fa-star" aria-hidden="true"></i> 4.7</span>
                                </div>
                            </div>
                            <div class="card-footer bg-white border-0">
                                <button class="btn btn-malawi w-100" aria-label="Add Handmade Jewelry Set to cart">Add to Cart</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sell Section -->
        <section class="py-5 bg-white" id="sell" role="region" aria-labelledby="sell-title">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="card auth-card">
                            <div class="card-header">
                                <h4 class="mb-0" id="sell-title"><i class="fas fa-tag me-2" aria-hidden="true"></i>Sell Your Item</h4>
                            </div>
                            <div class="card-body">
                                <form id="sellForm" enctype="multipart/form-data">
                                    <div class="mb-3">
                                        <label for="itemName" class="form-label">Item Name</label>
                                        <input type="text" class="form-control" id="itemName" required aria-describedby="itemNameError">
                                        <div id="itemNameError" class="invalid-feedback"></div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="itemDescription" class="form-label">Description</label>
                                        <textarea class="form-control" id="itemDescription" rows="3" required aria-describedby="itemDescriptionError"></textarea>
                                        <div id="itemDescriptionError" class="invalid-feedback"></div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="itemCategory" class="form-label">Category</label>
                                        <select class="form-select" id="itemCategory" required aria-describedby="itemCategoryError">
                                            <option value="">Select Category</option>
                                            <option value="furniture">Furniture</option>
                                            <option value="clothing">Clothing</option>
                                            <option value="electronics">Electronics</option>
                                            <option value="art">Art & Crafts</option>
                                            <option value="jewelry">Jewelry</option>
                                            <option value="vehicles">Vehicles</option>
                                        </select>
                                        <div id="itemCategoryError" class="invalid-feedback"></div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="itemPrice" class="form-label">Price (MWK)</label>
                                        <input type="number" class="form-control" id="itemPrice" min="0" step="0.01" required aria-describedby="itemPriceError">
                                        <div id="itemPriceError" class="invalid-feedback"></div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="itemLocation" class="form-label">Location</label>
                                        <select class="form-select" id="itemLocation" required aria-describedby="itemLocationError">
                                            <option value="">Select Location</option>
                                            <option value="lilongwe">Lilongwe</option>
                                            <option value="blantyre">Blantyre</option>
                                            <option value="mzuzu">Mzuzu</option>
                                            <option value="zomba">Zomba</option>
                                            <option value="other">Other</option>
                                        </select>
                                        <div id="itemLocationError" class="invalid-feedback"></div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="itemImages" class="form-label">Upload Images (Max 5, 5MB each)</label>
                                        <input type="file" class="form-control" id="itemImages" multiple accept="image/*" required aria-describedby="itemImagesError">
                                        <div id="itemImagesError" class="invalid-feedback"></div>
                                        <div class="image-preview mt-2 d-flex flex-wrap gap-2" id="imagePreview"></div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Payment Methods Accepted</label>
                                        <div class="d-flex flex-wrap gap-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="mpamba" checked>
                                                <label class="form-check-label" for="mpamba">
                                                    <span class="badge bg-primary">MPamba</span>
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="airtel-money" checked>
                                                <label class="form-check-label" for="airtel-money">
                                                    <span class="badge bg-danger">Airtel Money</span>
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="standard-bank">
                                                <label class="form-check-label" for="standard-bank">
                                                    <span class="badge bg-info">Standard Bank</span>
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="national-bank">
                                                <label class="form-check-label" for="national-bank">
                                                    <span class="badge bg-warning text-dark">National Bank</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-malawi w-100 py-2" aria-label="List item for sale">List Item for Sale</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section class="py-5 bg-white" id="about" role="region" aria-labelledby="about-title">
            <div class="container">
                <h2 class="section-title" id="about-title">About MsikaOnline</h2>
                <div class="row">
                    <div class="col-lg-8 mx-auto">
                        <p>MsikaOnline is Malawi's premier online marketplace, connecting buyers and sellers across the country. We provide a secure, user-friendly platform for trading goods with trusted local payment methods like MPamba, Airtel Money, and bank transfers.</p>
                        <p>Founded in 2025, our mission is to empower Malawian businesses and individuals by facilitating seamless transactions and fostering trust through verified sellers and secure payment systems.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section class="py-5 bg-light" role="region" aria-labelledby="testimonials-title">
            <div class="container">
                <h2 class="section-title text-center mb-5" id="testimonials-title">What Our Users Say</h2>
                <div class="row">
                    <div class="col-md-4 mb-4">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body">
                                <div class="mb-3 text-warning">
                                    <i class="fas fa-star" aria-hidden="true"></i>
                                    <i class="fas fa-star" aria-hidden="true"></i>
                                    <i class="fas fa-star" aria-hidden="true"></i>
                                    <i class="fas fa-star" aria-hidden="true"></i>
                                    <i class="fas fa-star" aria-hidden="true"></i>
                                </div>
                                <p class="card-text">"MsikaOnline helped me sell my furniture quickly and safely. The payment process was secure and I received my money instantly through MPamba."</p>
                                <div class="d-flex align-items-center mt-3">
                                    <img src="/images/user1.jpg" class="rounded-circle me-3" width="50" height="50" alt="Sarah Banda" loading="lazy" onerror="this.src='/images/placeholder.jpg'">
                                    <div>
                                        <h6 class="mb-0">Sarah Banda</h6>
                                        <small class="text-muted">Lilongwe</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body">
                                <div class="mb-3 text-warning">
                                    <i class="fas fa-star" aria-hidden="true"></i>
                                    <i class="fas fa-star" aria-hidden="true"></i>
                                    <i class="fas fa-star" aria-hidden="true"></i>
                                    <i class="fas fa-star" aria-hidden="true"></i>
                                    <i class="fas fa-star-half-alt" aria-hidden="true"></i>
                                </div>
                                <p class="card-text">"I found exactly what I was looking for at a great price. The seller was verified and the transaction was smooth. Will definitely use again!"</p>
                                <div class="d-flex align-items-center mt-3">
                                    <img src="/images/user2.jpg" class="rounded-circle me-3" width="50" height="50" alt="James Phiri" loading="lazy" onerror="this.src='/images/placeholder.jpg'">
                                    <div>
                                        <h6 class="mb-0">James Phiri</h6>
                                        <small class="text-muted">Blantyre</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body">
                                <div class="mb-3 text-warning">
                                    <i class="fas fa-star" aria-hidden="true"></i>
                                    <i class="fas fa-star" aria-hidden="true"></i>
                                    <i class="fas fa-star" aria-hidden="true"></i>
                                    <i class="fas fa-star" aria-hidden="true"></i>
                                    <i class="fas fa-star" aria-hidden="true"></i>
                                </div>
                                <p class="card-text">"As a small business owner, MsikaOnline has been invaluable for reaching customers across Malawi. The verification system builds trust with buyers."</p>
                                <div class="d-flex align-items-center mt-3">
                                    <img src="/images/user3.jpg" class="rounded-circle me-3" width="50" height="50" alt="Grace Mwale" loading="lazy" onerror="this.src='/images/placeholder.jpg'">
                                    <div>
                                        <h6 class="mb-0">Grace Mwale</h6>
                                        <small class="text-muted">Mzuzu</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Login Modal -->
        <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header bg-success text-white">
                        <h5 class="modal-title" id="loginModalLabel"><i class="fas fa-sign-in-alt me-2" aria-hidden="true"></i>Login</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="loginForm">
                            <div class="mb-3">
                                <label for="loginEmail" class="form-label">Email or Phone</label>
                                <input type="text" class="form-control" id="loginEmail" required aria-describedby="loginEmailError">
                                <div id="loginEmailError" class="invalid-feedback"></div>
                            </div>
                            <div class="mb-3">
                                <label for="loginPassword" class="form-label">Password</label>
                                <input type="password" class="form-control" id="loginPassword" required aria-describedby="loginPasswordError">
                                <div id="loginPasswordError" class="invalid-feedback"></div>
                                <div class="form-text text-end">
                                    <a href="#" class="text-decoration-none">Forgot password?</a>
                                </div>
                            </div>
                            <div class="mb-3 form-check">
                                <input type="checkbox" class="form-check-input" id="rememberMe">
                                <label class="form-check-label" for="rememberMe">Remember me</label>
                            </div>
                            <button type="submit" class="btn btn-malawi w-100" aria-label="Login">Login</button>
                            <div class="text-center mt-3">
                                <p class="mb-0">Don't have an account? <a href="#" class="text-decoration-none" data-bs-toggle="modal" data-bs-target="#registerModal" data-bs-dismiss="modal">Register</a></p>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Register Modal -->
        <div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="registerModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header bg-success text-white">
                        <h5 class="modal-title" id="registerModalLabel"><i class="fas fa-user-plus me-2" aria-hidden="true"></i>Register</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="registerForm">
                            <div class="mb-3">
                                <label for="registerName" class="form-label">Full Name</label>
                                <input type="text" class="form-control" id="registerName" required aria-describedby="registerNameError">
                                <div id="registerNameError" class="invalid-feedback"></div>
                            </div>
                            <div class="mb-3">
                                <label for="registerEmail" class="form-label">Email</label>
                                <input type="email" class="form-control" id="registerEmail" required aria-describedby="registerEmailError">
                                <div id="registerEmailError" class="invalid-feedback"></div>
                            </div>
                            <div class="mb-3">
                                <label for="registerPhone" class="form-label">Phone Number</label>
                                <input type="tel" class="form-control" id="registerPhone" required aria-describedby="registerPhoneError">
                                <div id="registerPhoneError" class="invalid-feedback"></div>
                            </div>
                            <div class="mb-3">
                                <label for="registerPassword" class="form-label">Password</label>
                                <input type="password" class="form-control" id="registerPassword" required aria-describedby="registerPasswordError">
                                <div class="password-strength mt-2">
                                    <div class="password-strength-bar" id="passwordStrengthBar"></div>
                                </div>
                                <div id="registerPasswordError" class="invalid-feedback"></div>
                                <div class="form-text">Password must be at least 8 characters</div>
                            </div>
                            <div class="mb-3">
                                <label for="registerConfirmPassword" class="form-label">Confirm Password</label>
                                <input type="password" class="form-control" id="registerConfirmPassword" required aria-describedby="registerConfirmPasswordError">
                                <div id="registerConfirmPasswordError" class="invalid-feedback"></div>
                            </div>
                            <div class="mb-3 form-check">
                                <input type="checkbox" class="form-check-input" id="agreeTerms" required>
                                <label class="form-check-label" for="agreeTerms">I agree to the <a href="#terms-of-service" class="text-decoration-none policy-link">Terms of Service</a> and <a href="#privacy-policy" class="text-decoration-none policy-link">Privacy Policy</a></label>
                            </div>
                            <button type="submit" class="btn btn-malawi w-100" aria-label="Register">Register</button>
                            <div class="text-center mt-3">
                                <p class="mb-0">Already have an account? <a href="#" class="text-decoration-none" data-bs-toggle="modal" data-bs-target="#loginModal" data-bs-dismiss="modal">Login</a></p>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Verification Modal -->
        <div class="modal fade" id="verificationModal" tabindex="-1" aria-labelledby="verificationModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header bg-success text-white">
                        <h5 class="modal-title" id="verificationModalLabel"><i class="fas fa-shield-alt me-2" aria-hidden="true"></i>Account Verification</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="text-center mb-4">
                            <i class="fas fa-envelope fa-4x text-success mb-3" aria-hidden="true"></i>
                            <h4>Verify Your Email</h4>
                            <p>We've sent a verification code to <strong id="userEmail">user@example.com</strong></p>
                        </div>
                        <form id="verificationForm">
                            <div class="mb-3">
                                <label for="verificationCode" class="form-label">Verification Code</label>
                                <input type="text" class="form-control text-center" id="verificationCode" maxlength="6" required aria-describedby="verificationCodeError">
                                <div id="verificationCodeError" class="invalid-feedback"></div>
                                <div class="form-text text-end">
                                    <a href="#" class="text-decoration-none">Resend code</a>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-malawi w-100" aria-label="Verify account">Verify Account</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Terms of Service Section -->
        <section id="terms-of-service" class="py-5 bg-light d-none" role="region" aria-labelledby="terms-title">
            <div class="container">
                <div class="policy-header">
                    <h1 id="terms-title">Terms of Service</h1>
                    <p class="text-muted">Last updated: April 19, 2025</p>
                </div>
                <div class="policy-section">
                    <h2>1. Introduction</h2>
                    <p>Welcome to MsikaOnline ("we," "our," or "us"). These Terms of Service ("Terms") govern your use of our website and services. By accessing or using MsikaOnline, you agree to comply with these Terms. If you disagree with any part, you may not access the service.</p>
                </div>
                <div class="text-center mt-5">
                    <a href="#home" class="btn btn-malawi policy-link" aria-label="Back to home">Back to Home</a>
                </div>
            </div>
        </section>

        <!-- Privacy Policy Section -->
        <section id="privacy-policy" class="py-5 bg-light d-none" role="region" aria-labelledby="privacy-title">
            <div class="container">
                <div class="policy-header">
                    <h1 id="privacy-title">Privacy Policy</h1>
                    <p class="text-muted">Last updated: April 19, 2025</p>
                </div>
                <div class="policy-section">
                    <h2>1. Information We Collect</h2>
                    <p>We collect information to provide and improve our services:</p>
                    <ul class="policy-list">
                        <li><strong>Personal Information:</strong> Name, email, phone number, address when you register or transact</li>
                        <li><strong>Transaction Data:</strong> Details of purchases and sales</li>
                    </ul>
                </div>
                <div class="text-center mt-5">
                    <a href="#home" class="btn btn-malawi policy-link" aria-label="Back to home">Back to Home</a>
                </div>
            </div>
        </section>

        <!-- Cookie Policy Section -->
        <section id="cookie-policy" class="py-5 bg-light d-none" role="region" aria-labelledby="cookie-title">
            <div class="container">
                <div class="policy-header">
                    <h1 id="cookie-title">Cookie Policy</h1>
                    <p class="text-muted">Last updated: April 19, 2025</p>
                </div>
                <div class="policy-section">
                    <h2>1. What Are Cookies</h2>
                    <p>Cookies are small text files stored on your device when you visit websites. They help websites remember information about your visit.</p>
                </div>
                <div class="text-center mt-5">
                    <a href="#home" class="btn btn-malawi policy-link" aria-label="Back to home">Back to Home</a>
                </div>
            </div>
        </section>

        <!-- GDPR Compliance Section -->
        <section id="gdpr-compliance" class="py-5 bg-light d-none" role="region" aria-labelledby="gdpr-title">
            <div class="container">
                <div class="policy-header">
                    <h1 id="gdpr-title">GDPR Compliance Statement</h1>
                    <p class="text-muted">Last updated: April 19, 2025</p>
                </div>
                <div class="policy-section">
                    <h2>1. Our Commitment</h2>
                    <p>MsikaOnline is committed to complying with the General Data Protection Regulation (GDPR) for our users in the European Union.</p>
                </div>
                <div class="text-center mt-5">
                    <a href="#home" class="btn btn-malawi policy-link" aria-label="Back to home">Back to Home</a>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <div class="footer-logo">MsikaOnline</div>
                    <p>Malawi's trusted marketplace connecting buyers and sellers nationwide.</p>
                    <div class="social-icons">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f" aria-hidden="true"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram" aria-hidden="true"></i></a>
                        <a href="#" aria-label="WhatsApp"><i class="fab fa-whatsapp" aria-hidden="true"></i></a>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 mb-4">
                    <div class="footer-links">
                        <h5>Quick Links</h5>
                        <ul>
                            <li><a href="#home">Home</a></li>
                            <li><a href="#browse">Browse Items</a></li>
                            <li><a href="#sell">Sell Items</a></li>
                            <li><a href="#" data-bs-toggle="modal" data-bs-target="#loginModal">My Account</a></li>
                            <li><a href="#">Pricing</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 mb-4">
                    <div class="footer-links">
                        <h5>Categories</h5>
                        <ul>
                            <li><a href="#">Furniture</a></li>
                            <li><a href="#">Electronics</a></li>
                            <li><a href="#">Clothing</a></li>
                            <li><a href="#">Vehicles</a></li>
                            <li><a href="#">Jewelry</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 mb-4">
                    <div class="footer-links">
                        <h5>Company</h5>
                        <ul>
                            <li><a href="#about">About Us</a></li>
                            <li><a href="#">Contact</a></li>
                            <li><a href="#">Careers</a></li>
                            <li><a href="#">Blog</a></li>
                            <li><a href="#">Help Center</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-2 mb-4">
                    <div class="footer-links">
                        <h5>Legal</h5>
                        <ul>
                            <li><a href="#terms-of-service" class="policy-link">Terms of Service</a></li>
                            <li><a href="#privacy-policy" class="policy-link">Privacy Policy</a></li>
                            <li><a href="#cookie-policy" class="policy-link">Cookie Policy</a></li>
                            <li><a href="#gdpr-compliance" class="policy-link">GDPR</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="copyright">
                <div class="row">
                    <div class="col-md-6 text-center text-md-start">
                        <p class="mb-0">&copy; 2025 MsikaOnline. All rights reserved.</p>
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        <p class="mb-0">
                            <span class="me-2">Proudly Malawian</span>
                            <img src="/images/mw-flag.png" alt="Malawi Flag" style="height: 15px;" loading="lazy" onerror="this.src='/images/placeholder.jpg'">
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Toast Notification Container -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3" aria-live="polite">
        <div id="toastNotification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="5000">
            <div class="toast-header">
                <strong class="me-auto">MsikaOnline</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous" onerror="this.src='/js/bootstrap.bundle.min.js'"></script>
    <script>
        // Polyfill for URL.createObjectURL
        if (!window.URL || !window.URL.createObjectURL) {
            window.URL = window.URL || {};
            window.URL.createObjectURL = function(obj) {
                return obj;
            };
        }

        // PWA Manifest
        const manifest = {
            "name": "MsikaOnline",
            "short_name": "MsikaOnline",
            "description": "Malawi's premier online marketplace",
            "start_url": "/",
            "display": "standalone",
            "background_color": "#f5f5f5",
            "theme_color": "#289e47",
            "icons": [
                {
                    "src": "/images/icon-192.png",
                    "sizes": "192x192",
                    "type": "image/png"
                },
                {
                    "src": "/images/icon-512.png",
                    "sizes": "512x512",
                    "type": "image/png"
                }
            ]
        };
        const stringManifest = JSON.stringify(manifest);
        const blob = new Blob([stringManifest], { type: 'application/json' });
        const manifestURL = URL.createObjectURL(blob);
        document.head.insertAdjacentHTML('beforeend', `<link rel="manifest" href="${manifestURL}">`);

        // Service Worker
        const swCode = `
            self.addEventListener('install', (event) => {
                event.waitUntil(
                    caches.open('msikaonline-v1').then((cache) => {
                        return cache.addAll([
                            '/',
                            '/index.html',
                            '/images/icon-192.png',
                            '/images/icon-512.png',
                            '/images/hero-bg.jpg',
                            '/images/market.jpg',
                            '/images/chair.jpg',
                            '/images/basket.jpg',
                            '/images/smartphone.jpg',
                            '/images/jewelry.jpg',
                            '/images/user1.jpg',
                            '/images/user2.jpg',
                            '/images/user3.jpg',
                            '/images/mw-flag.png',
                            '/images/placeholder.jpg',
                            'https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css',
                            'https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js',
                            'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css'
                        ]).catch((err) => console.error('Cache add failed:', err));
                    })
                );
            });
            self.addEventListener('fetch', (event) => {
                event.respondWith(
                    caches.match(event.request).then((response) => {
                        return response || fetch(event.request).catch(() => {
                            if (event.request.destination === 'image') {
                                return caches.match('/images/placeholder.jpg');
                            }
                            return caches.match('/index.html');
                        });
                    })
                );
            });
            self.addEventListener('activate', (event) => {
                event.waitUntil(
                    caches.keys().then((cacheNames) => {
                        return Promise.all(
                            cacheNames.filter((name) => name !== 'msikaonline-v1').map((name) => caches.delete(name))
                        );
                    })
                );
            });
        `;
        const swBlob = new Blob([swCode], { type: 'application/javascript' });
        const swURL = URL.createObjectURL(swBlob);
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register(swURL)
                    .then(() => console.log('Service Worker registered'))
                    .catch((err) => console.error('Service Worker registration failed:', err));
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Utility Functions
            const showToast = (message, type = 'success') => {
                const toast = document.getElementById('toastNotification');
                if (!toast) return;
                const toastBody = toast.querySelector('.toast-body');
                if (toastBody) {
                    toastBody.textContent = message;
                    toast.classList.remove('bg-success', 'bg-danger');
                    toast.classList.add(`bg-${type}`);
                    const bsToast = new bootstrap.Toast(toast);
                    bsToast.show();
                }
            };

            const sanitizeInput = (input) => {
                if (!input) return '';
                const div = document.createElement('div');
                div.textContent = input;
                return div.innerHTML;
            };

            const validateField = (input, field) => {
                if (!input) return false;
                const errorElement = document.getElementById(`${field.id}Error`);
                if (!errorElement) return false;

                const value = sanitizeInput(input.value.trim());
                if (!value) {
                    input.classList.add('is-invalid');
                    errorElement.textContent = `${field.label} is required`;
                    return false;
                } else if (field.validate && !field.validate(value)) {
                    input.classList.add('is-invalid');
                    errorElement.textContent = field.errorMessage;
                    return false;
                } else {
                    input.classList.remove('is-invalid');
                    errorElement.textContent = '';
                    return true;
                }
            };

            const validateForm = (formId, fields) => {
                const form = document.getElementById(formId);
                if (!form) return false;

                let isValid = true;
                fields.forEach(field => {
                    const input = form.querySelector(`#${field.id}`);
                    if (!validateField(input, field)) isValid = false;
                });
                return isValid;
            };

            // Image Preview and Validation
            const handleImageUpload = () => {
                const imageUpload = document.getElementById('itemImages');
                const imagePreview = document.getElementById('imagePreview');
                const imageError = document.getElementById('itemImagesError');
                if (!imageUpload || !imagePreview || !imageError) {
                    console.error('Image upload elements not found');
                    return;
                }

                imageUpload.addEventListener('change', () => {
                    imagePreview.innerHTML = '';
                    imageError.textContent = '';
                    imageUpload.classList.remove('is-invalid');

                    const files = Array.from(imageUpload.files);
                    if (files.length > 5) {
                        imageUpload.classList.add('is-invalid');
                        imageError.textContent = 'Maximum 5 images allowed';
                        imageUpload.value = '';
                        showToast('Maximum 5 images allowed', 'danger');
                        return;
                    }

                    for (const file of files) {
                        if (!file.type.match('image.*')) {
                            imageUpload.classList.add('is-invalid');
                            imageError.textContent = 'Only image files are allowed';
                            imageUpload.value = '';
                            showToast('Only image files are allowed', 'danger');
                            return;
                        }
                        if (file.size > 5 * 1024 * 1024) {
                            imageUpload.classList.add('is-invalid');
                            imageError.textContent = 'Each image must be less than 5MB';
                            imageUpload.value = '';
                            showToast('Each image must be less than 5MB', 'danger');
                            return;
                        }

                        const reader = new FileReader();
                        reader.onload = (e) => {
                            const img = document.createElement('img');
                            img.src = e.target.result || '/images/placeholder.jpg';
                            img.classList.add('img-thumbnail');
                            img.style.width = '80px';
                            img.style.height = '80px';
                            img.alt = 'Uploaded product image';
                            img.onerror = () => {
                                img.src = '/images/placeholder.jpg';
                            };
                            imagePreview.appendChild(img);
                        };
                        reader.onerror = () => {
                            imageUpload.classList.add('is-invalid');
                            imageError.textContent = 'Error reading image file';
                            showToast('Error reading image file', 'danger');
                        };
                        reader.readAsDataURL(file);
                    }
                });
            };

            // Password Strength
            const handlePasswordStrength = () => {
                const passwordInput = document.getElementById('registerPassword');
                const strengthBar = document.getElementById('passwordStrengthBar');
                if (!passwordInput || !strengthBar) return;

                passwordInput.addEventListener('input', function () {
                    const password = this.value;
                    let strength = 0;

                    if (password.length >= 8) strength += 25;
                    if (password.length >= 12) strength += 25;
                    if (/[A-Z]/.test(password)) strength += 15;
                    if (/[0-9]/.test(password)) strength += 15;
                    if (/[^A-Za-z0-9]/.test(password)) strength += 20;

                    strengthBar.style.width = strength + '%';
                    strengthBar.style.backgroundColor = strength < 50 ? '#dc3545' : strength < 75 ? '#fd7e14' : '#28a745';
                });
            };

            // Dark Mode Toggle
            const handleDarkMode = () => {
                const html = document.getElementById('html-root');
                const toggleButton = document.getElementById('darkModeToggle');
                if (!html || !toggleButton) {
                    console.error('Dark mode elements not found');
                    return;
                }

                // Set initial state
                const savedMode = localStorage.getItem('darkMode');
                if (savedMode === 'enabled' || (!savedMode && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                    html.classList.add('dark-mode');
                    toggleButton.innerHTML = `<i class="fas fa-sun" aria-hidden="true"></i>`;
                } else {
                    toggleButton.innerHTML = `<i class="fas fa-moon" aria-hidden="true"></i>`;
                }

                // Toggle dark mode
                toggleButton.addEventListener('click', () => {
                    html.classList.toggle('dark-mode');
                    const isDark = html.classList.contains('dark-mode');
                    toggleButton.innerHTML = `<i class="fas fa-${isDark ? 'sun' : 'moon'}" aria-hidden="true"></i>`;
                    localStorage.setItem('darkMode', isDark ? 'enabled' : 'disabled');
                });
            };

            // Product Search and Filter
            const handleProductSearch = () => {
                const searchInput = document.getElementById('productSearch');
                const categoryFilter = document.getElementById('categoryFilter');
                const productList = document.getElementById('productList');
                if (!searchInput || !categoryFilter || !productList) return;

                const filterProducts = () => {
                    const searchTerm = sanitizeInput(searchInput.value.toLowerCase());
                    const category = categoryFilter.value;
                    const products = productList.querySelectorAll('.col-md-6');

                    products.forEach(product => {
                        const titleElement = product.querySelector('.card-title');
                        if (!titleElement) return;
                        const title = titleElement.textContent.toLowerCase();
                        const productCategory = product.dataset.category;
                        const matchesSearch = !searchTerm || title.includes(searchTerm);
                        const matchesCategory = !category || productCategory === category;
                        product.style.display = matchesSearch && matchesCategory ? '' : 'none';
                    });
                };

                searchInput.addEventListener('input', filterProducts);
                categoryFilter.addEventListener('change', filterProducts);
            };

            // Cookie Consent
            const handleCookieConsent = () => {
                const cookieBanner = document.getElementById('cookieBanner');
                const cookieAccept = document.getElementById('cookieAccept');
                const cookieDecline = document.getElementById('cookieDecline');
                if (!cookieBanner || !cookieAccept || !cookieDecline) return;

                if (!localStorage.getItem('cookieConsent')) {
                    cookieBanner.classList.add('show');
                }

                cookieAccept.addEventListener('click', () => {
                    localStorage.setItem('cookieConsent', 'accepted');
                    cookieBanner.classList.remove('show');
                    showToast('Cookies accepted');
                });

                cookieDecline.addEventListener('click', () => {
                    localStorage.setItem('cookieConsent', 'declined');
                    cookieBanner.classList.remove('show');
                    showToast('Cookies declined');
                });
            };

            // Policy Navigation
            const handlePolicyNavigation = () => {
                const policyLinks = document.querySelectorAll('.policy-link');
                const mainSections = ['home', 'categories', 'browse', 'sell', 'about'].map(id => document.getElementById(id));
                const policySections = ['terms-of-service', 'privacy-policy', 'cookie-policy', 'gdpr-compliance'].map(id => document.getElementById(id));

                policyLinks.forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const targetId = link.getAttribute('href').substring(1);
                        const targetSection = document.getElementById(targetId);

                        if (targetSection) {
                            // Hide all sections
                            mainSections.forEach(section => {
                                if (section) section.classList.add('d-none');
                            });
                            policySections.forEach(section => {
                                if (section) section.classList.add('d-none');
                            });

                            // Show target section
                            targetSection.classList.remove('d-none');

                            // If navigating to home, show all main sections
                            if (targetId === 'home') {
                                mainSections.forEach(section => {
                                    if (section) section.classList.remove('d-none');
                                });
                            }

                            // Smooth scroll to target
                            window.scrollTo({
                                top: targetSection.offsetTop - 70,
                                behavior: 'smooth'
                            });
                        }
                    });
                });
            };

            // Form Handlers with Real-Time Validation
            const handleForms = () => {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                const phoneRegex = /^\+?\d{10,}$/;
                const priceRegex = /^\d+(\.\d{1,2})?$/;

                // Login Form
                const loginFields = [
                    {
                        id: 'loginEmail',
                        label: 'Email or Phone',
                        validate: (value) => emailRegex.test(value) || phoneRegex.test(value),
                        errorMessage: 'Please enter a valid email or phone number'
                    },
                    {
                        id: 'loginPassword',
                        label: 'Password',
                        validate: (value) => value.length >= 8,
                        errorMessage: 'Password must be at least 8 characters'
                    }
                ];

                document.getElementById('loginForm')?.addEventListener('submit', (e) => {
                    e.preventDefault();
                    if (validateForm('loginForm', loginFields)) {
                        showToast('Login successful', 'success');
                        bootstrap.Modal.getInstance(document.getElementById('loginModal')).hide();
                    }
                });

                // Register Form
                const registerFields = [
                    {
                        id: 'registerName',
                        label: 'Full Name',
                        validate: (value) => value.length >= 2,
                        errorMessage: 'Name must be at least 2 characters'
                    },
                    {
                        id: 'registerEmail',
                        label: 'Email',
                        validate: (value) => emailRegex.test(value),
                        errorMessage: 'Please enter a valid email address'
                    },
                    {
                        id: 'registerPhone',
                        label: 'Phone Number',
                        validate: (value) => phoneRegex.test(value),
                        errorMessage: 'Please enter a valid phone number'
                    },
                    {
                        id: 'registerPassword',
                        label: 'Password',
                        validate: (value) => value.length >= 8,
                        errorMessage: 'Password must be at least 8 characters'
                    },
                    {
                        id: 'registerConfirmPassword',
                        label: 'Confirm Password',
                        validate: (value) => value === document.getElementById('registerPassword')?.value,
                        errorMessage: 'Passwords do not match'
                    }
                ];

                document.getElementById('registerForm')?.addEventListener('submit', (e) => {
